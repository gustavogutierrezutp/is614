module imm_gen (
  input  wire [31:0] inst,
  output reg  [31:0] imm
);
  always @(*) begin
    imm = 32'b0;
    case (inst[6:0])
      7'b0010011, // I-type ALU imm
      7'b0000011, // load
      7'b1100111: // jalr
        imm = {{20{inst[31]}}, inst[31:20]}; // sign-extend
      default: imm = 32'b0;
    endcase
  end
endmodule
