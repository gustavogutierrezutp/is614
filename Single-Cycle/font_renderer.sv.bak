// ============================================================
// font_renderer.sv
// Renderizador de caracteres 8x16 usando font_rom
// ============================================================
//
// üß† Descripci√≥n:
// Dibuja un pixel individual seg√∫n el c√≥digo ASCII, la fila y la
// columna dentro del car√°cter. Usa la ROM de fuente 8x16.
//
// ============================================================

module font_renderer (
    input  logic        clk,          // reloj VGA
    input  logic [7:0]  ascii_code,   // c√≥digo ASCII (0‚Äì127)
    input  logic [3:0]  row_in_char,  // fila dentro del car√°cter (0‚Äì15)
    input  logic [2:0]  col_in_char,  // columna dentro del car√°cter (0‚Äì7)
    output logic        pixel_on      // 1 = pixel encendido, 0 = apagado
);

    // ============================================================
    // Direcci√≥n dentro de la ROM (cada car√°cter = 16 filas)
    // ============================================================
    logic [10:0] rom_addr;
    assign rom_addr = {ascii_code[6:0], row_in_char};  
    // 7 bits para el car√°cter + 4 bits para la fila = 11 bits totales

    // ============================================================
    // Lectura de la fuente desde font_rom
    // ============================================================
    logic [7:0] rom_data;

    font_rom rom_inst (
        .clk  (clk),
        .addr (rom_addr),
        .data (rom_data)
    );

    // ============================================================
    // Selecci√≥n del bit de la columna
    // ============================================================
    // Se invierte el √≠ndice (7 - col_in_char) para recorrer de
    // izquierda a derecha seg√∫n el formato del bitmap.
    // ============================================================
    always_ff @(posedge clk) begin
        pixel_on <= rom_data[7 - col_in_char];
    end

endmodule
